<!DOCTYPE html>
<html lang="en">
<head>
    <!-- 懒加载  页面出现图片加载 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Lazyload</title>
    <style>
    .image-item{
        display: block;
        margin-bottom: 50px;
        height: 200px;

    }
    
    </style>
</head>
<body>
    <!-- 给标签加属性 data-自定义 -->
        <img src="" class="image-item" lazyload="true" data-original="http://img1.3lian.com/2015/a1/149/d/129.jpg" />
        <img src="" class="image-item" lazyload="true" data-original="http://img15.3lian.com/2015/f2/57/d/96.jpg" />
        <img src="" class="image-item" lazyload="true" data-original="http://img2.3lian.com/2014cf/f6/146/d/93.jpg" />
        <img src="" class="image-item" lazyload="true" data-original="http://s9.knowsky.com/sc/mjpg/92/2013082412182770364.jpg" />
        <img src="" class="image-item" lazyload="true" data-original="http://pic1.win4000.com/wallpaper/b/546441f1d83c2.jpg" />
        <img src="" class="image-item" lazyload="true" data-original="http://www.officedoyen.com/uploads/allimg/140929/1-140929230255201.jpg" />
        <img src="" class="image-item" lazyload="true" data-original="http://img1.3lian.com/2015/w22/38/d/82.jpg" />
        <img src="" class="image-item" lazyload="true" data-original="http://b.zol-img.com.cn/desk/bizhi/image/4/960x600/1393553860400.jpg" />
        <img src="" class="image-item" lazyload="true" data-original="http://img2.3lian.com/2014cf/f6/146/d/92.jpg" />
        <img src="" class="image-item" lazyload="true" data-original="http://pic1.win4000.com/wallpaper/2018-01-09/5a547c0cb840c.jpg" />
        <img src="" class="image-item" lazyload="true" data-original="http://image.biaobaiju.com/uploads/20180802/00/1533139825-SvFkOmnxrA.jpg" />
        <img src="" class="image-item" lazyload="true" data-original="http://img3.xiazaizhijia.com/walls/20160927/1440x900_dec5fdacc3059ca.jpg" />
      
        <script>
            //获取 当前可视区域高度
        var viewHeight=document.documentElement.clientHeight
        
        function lazyload() {
            // 获取所有属性标签的方式 页面上img
            var eles=document.querySelectorAll('img[data-original][lazyload]')
            // querySelectorAll  参数item为遍历页面上的img 
            Array.prototype.forEach.call(eles, function(item, index){
                var rect
                // 判断是否存在  获取节点属性dataSet.original
                if(item.dataset.original==='')
                return;
                // 获取浏览器当前可视区域的大小
                rect=item.getBoundingClientRect()
                if(rect.bottom>=0 && rect.top<viewHeight) //距离可视区域  在可视区域内部
                {
                    //  !function()立即执行函数
                    !function(){
                        var img=new Image()
                        img.src=item.dataset.original
                        img.onload=function(){
                            item.src=img.src
                        }
                        item.removeAttribute('data-original')
                        item.removeAttribute('lazyload')
                    }()
                }                
            })
        }
        lazyload()
        // 滑动事件 调用load方法  下滑滚动条加载图片
        document.addEventListener('scrool',lazyload)
        </script>
</body>
</html>